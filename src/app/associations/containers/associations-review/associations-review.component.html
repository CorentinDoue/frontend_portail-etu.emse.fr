<div class="container">
      <mat-card *ngIf="loaded">
        <mat-card-title>{{asso.name}}</mat-card-title>

        <div class="row">
          <div class="col-md-4 d-flex flex-column align-content-center align-items-center justify-content-center" *ngIf="(asso.description && asso.logo) || authService.isAuthenticated(1, asso.id) || authService.isAuthenticated(8)">
            <img [src]="imgPath+'/'+asso.logo.filename" [alt]="asso.logo.filename" style="width: 100%;" *ngIf="asso.logo">

            <mat-card-title *ngIf="!asso.logo && (authService.isAuthenticated(1, asso.id) || authService.isAuthenticated(8))">Ajouter un logo ?</mat-card-title>

            <svg-icon src="assets/add-logo.svg" [svgStyle]="{ 'width.%': '100', 'height.%': '100' }" *ngIf="!asso.logo && !addLogo && (authService.isAuthenticated(1, asso.id) || authService.isAuthenticated(8))" (click)="addLogo = true;"></svg-icon>

            <app-img-upload-form *ngIf="addLogo && (authService.isAuthenticated(1, asso.id) || authService.isAuthenticated(8))" [imgName]="'logo_asso_'+asso.id" (submitted)="uploadImg($event)" (canceled)="addLogo = false;"></app-img-upload-form>

            <mat-spinner *ngIf="logoLoading" [diameter]="50" ></mat-spinner>

            <button class="mt-2" mat-raised-button color="accent" (click)="addLogo = true" *ngIf="!addLogo && asso.logo && (authService.isAuthenticated(1, asso.id) || authService.isAuthenticated(8))">Changer le logo</button>
          </div>

          <div class="col-md-8" *ngIf="(asso.description && asso.logo) || authService.isAuthenticated(1, asso.id) || authService.isAuthenticated(8)">
            <p *ngIf="asso.description && !addDesc" [innerHTML]="asso.description | keepHtml"></p>

            <mat-spinner *ngIf="descLoading" [diameter]="50"></mat-spinner>

            <app-text-area-form *ngIf="addDesc && (authService.isAuthenticated(1, asso.id) || authService.isAuthenticated(8))" [text]="asso.description" (submitted)="uploadDesc($event)" (canceled)="addDesc = false;"></app-text-area-form>

            <button mat-raised-button color="accent" (click)="addDesc = true" *ngIf="!addDesc && !asso.description && (authService.isAuthenticated(1, asso.id) || authService.isAuthenticated(8))">Ajouter une description</button>

            <button class="mt-2" mat-raised-button color="accent" (click)="addDesc = true" *ngIf="!addDesc && asso.description && (authService.isAuthenticated(1, asso.id) || authService.isAuthenticated(8))">Changer la description</button>
          </div>

          <div class="col d-flex flex-column align-content-center align-items-center justify-content-center" *ngIf="(!asso.description || !asso.logo) && !authService.isAuthenticated(1, asso.id) && !authService.isAuthenticated(8)">
            <p *ngIf="asso.description" [innerHTML]="asso.description | keepHtml"></p>
            <img [src]="imgPath+'/'+asso.logo.filename" [alt]="asso.logo.filename" style="max-height: 300px;" *ngIf="asso.logo">
          </div>
        </div>

        <app-positions-list [positions]="asso.positions" (delete)="deletePosition($event)" [modify]="changePos && (authService.isAuthenticated(2, asso.id) || authService.isAuthenticated(8))"></app-positions-list>

        <app-add-position-form [assoId]="asso.id" [roles]="roles" [users]="users" (submitted)="addPosition($event)" *ngIf="roles && users && !positionLoading && changePos && (authService.isAuthenticated(2, asso.id) || authService.isAuthenticated(8))"></app-add-position-form>

        <div class="row justify-content-center" *ngIf="authService.isAuthenticated(2, asso.id) || authService.isAuthenticated(8)">
          <mat-spinner [diameter]="150" *ngIf="positionLoading"></mat-spinner>
          <button class="mt-2" mat-raised-button color="accent" (click)="changePos = true" *ngIf="!changePos">Modifier les membres</button>
          <button class="mt-2" mat-raised-button color="warn" (click)="changePos = false" *ngIf="changePos && !positionLoading">Annuler</button>
        </div>
      </mat-card>
</div>
<div class="centrer" *ngIf="!loaded">
  <mat-spinner  [diameter]="200" [strokeWidth]="5"></mat-spinner>
</div>
